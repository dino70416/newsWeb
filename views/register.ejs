<% include header %>
<div>
  <form class="form-signin" id="register" role="form" method="post" action="register">
    <h3 class="form-signin-heading center">建立帳號</h3>
    <div class="row center">
    <form class="col s12">
      <div class="row">
        <div class="col s4"></div>
        <div class="input-field col s4">
          <i class="material-icons prefix">account_circle</i>
          <input placeholder="請輸入使用者名稱" name="username" type="text" class="validate">
          <label for="username">使用者名稱</label>
        </div>
      </div>
      <div class="row">
        <div class="col s4"></div>
        <div class="input-field col s4">
          <i class="material-icons prefix">keyboard</i>
          <input placeholder="請輸入密碼" name="password" type="password" class="validate">
          <label for="password">密碼</label>
        </div>
      </div>
      <div class="row">
        <div class="col s4"></div>
        <div class="input-field col s4">
          <i class="material-icons prefix">email</i>
          <input placeholder="請輸入信箱" name="email" type="email" class="validate">
          <label for="email">Email</label>
        </div>
        <div id="test"></div>
      </div>
      <div class="col s4"></div>
      <div class="col s4">
        <button class="btn waves-effect waves-light g-recaptcha" type="submit" name="action" data-sitekey="6LfX1KcZAAAAAGdXsK6Q5VZZJl2D0CDU0_89rdl-" data-callback='onSubmit' data-action='submit'>註冊
          <i class="material-icons right">send</i>
        </button>
        <a class="btn btn-link red" href="/login" role="button">登入</a>
      </div>
    </form>
  </div>
</div>

<script>
   function onSubmit(token) {
     if ($('input[name="username"]').val() == '') {
       alert('請輸入使用者名稱');
     } else if ($('input[name="password"]').val() == '') {
       alert('請輸入密碼');
     } else if ($('input[name="email"]').val() == '') {
       alert('請輸入信箱');
     } else {
       document.getElementById("register").submit();
    //   var username = { username:  $('input[name="username"]').val() };
    //   $.ajax({
    //     data: username,
    //     url: '/register',
    //     dataType: 'json',
    //     type: 'POST',
    //     cache: false,
    //     timeout: 5000,
    //     success: function(data) {
    //       alert(data)
    //     }
    //   })
     }
   }
 </script>
